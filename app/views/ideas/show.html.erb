<div class= "shadow-sm p-3 mb-5 bg-white rounded overflow-wrap">

<h1> 
    <span class = "badge badge-pill badge-info" >
        <%= @idea.title %>
    </span>
 </h1>

<p class= "shadow-none p-3 mb-5 bg-light rounded">
    <%= @idea.description%>
</p>
<p><%= @idea.created_at %></p>
<small>
<% if @like.present? %>
<%= link_to  "Unlike", like_path(@like),method: :delete %>
<%else%>
<%= link_to  "Like", idea_likes_path(@idea),method: :post %>
<% end %>
</small>
<div>
  <strong>By <%= @idea.user.first_name%> </strong>
  <% if can? :crud, @idea%>  
<%= link_to  "Edit", edit_idea_path(@idea),class: "btn btn-info" %>
<%= link_to  "Delete", idea_path(@idea) ,
 method: :delete , data: {confirm:  "Are you sure?"},class: "btn btn-danger"%>
 </div>
 <% end %>
 </div>
 
<%= form_with model: [@idea, @review], local: true do |f| %>
    <% if @review.errors.any? %>
    <ul>
        <% @review.errors.full_messages.each do |msg| %>
            <li class="text-danger"><%= msg %></li>
        <% end %>
    </ul>
    <% end %>
     <div class='form-group'>
      <%= f.label :reviews %>
      <%= f.text_area(:body, class: 'form-control',cols: 50,rows: 5, placeholder: 'Your thoughts here' )%>
     </div>
     <%= f.submit class: 'btn btn-primary' %>
 
    <div>
    <ul class = "List-group answer-List">
         <% @reviews.each do |review| %>
         <li class= "list-group-item">
            <%= review.body %>
            <p>
            Reviewed <%= time_ago_in_words(review.created_at)%>
            <%if can?(:crud, review) %>
            <%= link_to(
                "Delete",
                idea_review_path(@idea, review),
                method: :delete,
                data: {
                confirm: "are you sure you want to delete this delete?"
                 },
                class: "btn btn-danger btn-sm"
            )%> 
            <% end %>
        <% end %>
            </p>
            
        </li>
    
    <% end %>
</ul>


